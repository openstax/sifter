<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="theme-color" content="#000000"/>
    <link rel="manifest" href="./manifest.json"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
          integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous"/>
    <style>
        #sandbox {
            display: none;
        }

        #results {
            list-style: none;
        }

        details:not(.found-matches) {
            color: #888;
            list-style-type: none;
        }

        details.found-matches summary {
            cursor: pointer;
            font-weight: bold;
        }

        input:invalid:not(:focus) {
            border: 3px dashed red;
        }

        input:invalid ~ button {
            color: #888;
            pointer-events: none;
        }

        #advanced-toggle:not(:checked) + #advanced-area {
            display: none;
        }

        #validation-message {
            font-weight: bold;
            color: red;
        }
        .search-not-started {
            display: none
        }
    </style>
</head>
<body>
<div class="container">
    <div class="text-center">
        <h1>Bulk Content Search</h1>
        <p>This searches most of our books (<a id="book-count">???</a>) for content by loading the books in your
            browser.
            The
            first time is slow but once the books are loaded searches are really fast.</p>
        <p><a target="_blank" href="https://github.com/openstax/sifter">Source</a>. <a target="_blank"
                                                                                       href="./help">Help</a>
        </p>
    </div>
    <form>
        <div class="row">
            <input type="hidden" name="v" value="1"/>
            <div id="validation-message"></div>
            <input name="q" id="selector" placeholder="CSS or XPath (//h:*) Selector" class="col-sm-6"/>
            <button type="submit" id="start">Start</button>
            <button id="stop" disabled="disabled">Stop</button>
            <button id="skip" disabled="disabled">Skip</button>
        </div>
        <br/>
        <ul>
            <li><input type="radio" id="use-xhtml" name="sourceFormat" value="xhtml"/><label for="use-xhtml">Search
                XHTML</label></li>
            <li><input type="radio" id="use-cnxml" name="sourceFormat" value="cnxml"/><label for="use-cnxml">Search
                CNXML</label></li>
        </ul>
        <label for="books">Books to search:</label>
        <br/>
        <select id="books" name="books" multiple="multiple" class="col-sm-8" size="15"></select>
    </form>
    <h4 class="search-not-started" id="resultsLabel">Results</h4>
    <ul id="results"></ul>
    <h4 class="search-not-started" id="errorLogLabel">Error Log</h4>
    <ul id="errors" style="font-size: x-small">
    </ul>
</div>
<div id="sandbox"></div>

<script>
     if ('serviceWorker' in navigator) {
          // Use the window load event to keep the page load performant
          window.addEventListener('load', () => {
               navigator.serviceWorker.register('./service-worker.js');
          });
     }
</script>
<script src="./app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
        integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2"
        crossorigin="anonymous"></script>

</body>
</html>


